---
# Feel free to add content and custom Front Matter to this file.
# To modify the layout, see https://jekyllrb.com/docs/themes/#overriding-theme-defaults

title: Роли  
layout: default
nav_order: 1
parent: Гильд чаты
has_toc: false
---

Требования: 
{: .d-inline}

Профиль 
{: .label .label-blue }

Некоторые функции бота связаны со знанием ГМа и\или сквайра в гильдии. Например, чтобы выслать уведомления ГМу о том, что вам требуются ресурсы. 

## Условия для указания ролей  

Игроки, для которых должна быть установлена роль должны дать доступ к своему профилю, чтобы бот узнал ваше игровое имя. Это необходимо для того, чтобы можно было по нему и сообщению от игры сопоставить игроков и их роли в гильдии. 

## Задание ролей 

Для начала можно проверить командой `/guild`, как Казна видит состав гильдии и какие права выданы игроками. 

![guild_before]

Первые четыре столбика обозначают выданные права, пятый - роль в гильдии. Нас интересует третий, который указывает на доступ к профилю и пятый. На скриншоте видно, что доступ к профилю выдали все и что все являются простыми бойцами. 

Чтобы задать роли, надо выполнить команду `/g_roles` **в CW**. 

![guild_cw_roles]

Результат команды надо *форвардом* переслать в Казну. После форварда сообщения, Казна должна ответить `Guild roster accepted`. Далее проверяем командой `/guild`, что командиры, сквайры, казначеи и бартендеры корректно отображаются. 

![guild_after]

## Почему так сложно? 

Потому что API CW не дают возможности взять состав гильдии. В последних обновлениях можно узнать роль игрока в гильдии, но для этого надо на регулярной основе опрашивать гильд-сток для всех пользователей, а я не хочу перегружать API игры решением "в лоб". 

[guild_before]: images/guild_before.png
[guild_after]: images/guild_after.png
[guild_cw_roles]: images/guild_cw_roles.png


